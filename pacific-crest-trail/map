<!DOCTYPE html>
<html>
	<head>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-128007478-5"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'UA-128007478-5');
        </script>

		<meta charset='utf-8' />
		<title>Longtrailsmap: Pacific Crest Trail</title>
        <link rel="icon" type="image/png" href="http://www.longtrailsmap.net/favicon.png">    
		<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
        <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.52.0/mapbox-gl.js'></script>
        <script src="/../common/ResizeSensor.js"></script>
        <script src="/../common/ElementQueries.js"></script>
        
		<link rel='stylesheet' href="https://api.tiles.mapbox.com/mapbox-gl-js/v0.52.0/mapbox-gl.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css">
        
		<style>
            * {
                box-sizing: border-box;
            }
            
            body {
                margin: 0;
                padding: 0;
            }
            
            #container {
                display: flex; 
                height: 100vh;
                width: 100%;
            }
            
            #sidebar-container {
                order: 1;
                height: 100%;
                flex-basis: 25%;
                overflow-y: scroll;
            }
            
            #search-text, #search_go {
                margin: 4px;
            }
            
            #search-text {
                width: 80%;
            }
            
            #map-container {
                order: 2;
                height: 100%;
                flex-basis: 75%;
            }
            
            #map, #map-buttons {
                position: absolute;
                height: 100vh;
                width: 75%;
            }
            
            #map {
                z-index: 5;
            }
            
            #map-buttons {
                z-index: 6;
                margin: 4px;
                height: 1px;
                width: 1px;            
            }
            
            .marker {
                background-image: url('http://www.longtrailsmap.net/circle.svg');
                background-size: cover;
                width: 50px;
                height: 50px;
                border-radius: 50%;
                cursor: pointer;
            }
		</style>
	</head>
	<body>
        <div id="dialog" title="Add Location" style="display:none">
          <p>Enter a description for this location.<br><font size=2><br>Please note that LTM does not knowingly publish data regarding non-<a href='https://lnt.org/why/7-principles/' target='_blank' rel='noopener noreferrer'>LNT</a> campsites and fire rings, unofficial side trails, and other items we consider inconsistent with responsible use.</font></p>
          <input type="text" id="addLocationDescription" name="name" required minlength="10" maxlength="75" size="25">
          <br>
          <br>
          <input type="button" id="btnAddLocationSubmit" value="Submit" />
          <input type="button" id="btnAddLocationCancel" value="Cancel" />
        </div>
        <div id="container">
            <div id="sidebar-container">
                <input id="search-text" type="search" name="wpt_search" placeholder="Search">
                <button type="button" id="search_go">Go</button>
            </div>
            <div id="map-container">
                <div id="map-buttons">
                    <button type="button" id="about" class="map-buttons" onclick="window.location.href='/pacific-crest-trail/about'">About</button>
                    <button type="button" id="sidebar-btn" class="map-buttons">Sidebar</button>
                    <button type="button" id="ltm" class="map-buttons" onclick="window.location.href='http://www.longtrailsmap.net'">LTM</button>
                    <pre id='info'></pre>
                </div>
                <div id="map"></div>
            </div>
        </div>
        <script type="text/javascript">
            var markers = [];
            var updateUrl = false;
            var vars = [];
            var map;

            const urlParams = new URLSearchParams(window.location.search);
            const paramName = urlParams.get('name');
            const paramLatLon = urlParams.get('latlon');
            const paramZoom = urlParams.get('zoom');
            
            $.getJSON("http://www.longtrailsmap.net/pacific-crest-trail/pct-markers.geojson", function( data ) {
                markers = data;
            })
            //.fail(function() { alert("Error: Unable to load search."); });
            .fail( function(d, textStatus, error) {
                console.error("getJSON failed, status: " + textStatus + ", error: "+error)
            });
            
            function searchResultClick(lon, lat, short_name) {                
                updateUrl = false;
                
                map.flyTo({center: [lon, lat], zoom:16, speed: 0.75, curve: 1.5});
                window.history.pushState('page', '', '?name='+short_name);
            };
            $.get("/../common/vars.json", function (vars) {
                mapboxgl.accessToken = vars.mapbox;

                $(document).ready(function(){
                    // Mapbox GL JS does not automatically resize & refresh map when size of container changes. Using ResizeSensor to fix. https://stackoverflow.com/a/19418065 
                    new ResizeSensor( $('#map'), function() {console.log('map container resized, calling map.resize() via ResizeSensor.'); map.resize();});

                    $('#sidebar-btn').click(function () {
                        if($('#sidebar-container').css('display') !== 'none') {
                            $('#sidebar-container').css('display', 'none');
                            $('#map-container').css('width', '100%');
                            $('#map').css('width', '100%');                    
                        } else {
                            $('#sidebar-container').css('display', 'block');
                            $('#map-container').css('width', '80%');
                            $('#map').css('width', '80%');                                        
                        }
                    });
                    
                    $("#search-text").keyup(function(event) {
                        if (event.keyCode === 13) {
                            $("#search_go").click();
                        }
                    });                
                    
                    $("#addLocationDescription").keyup(function(event) {
                        if (event.keyCode === 13) {
                            $("#btnAddLocationSubmit").click();
                        }
                    });                

                    $('#search_go').click(function(){
                        var results = [];
                        var items = [];
                        
                        $('#results_list').remove();

                        results = markers.features.filter(function(item) { 
                            return item.properties.searchString.includes($('#search-text').val().toLowerCase());
                        });

                        results.sort(function(a, b) {
                            var textA = a.properties.title.toLowerCase();
                            var textB = b.properties.title.toLowerCase();
                            return (textA < textB) ? -1 : (textA > textB) ? 1 : 0;
                        });
                        
                        $.each(results, function( key, val) {
                            var f = `searchResultClick(${val.geometry.coordinates[0]}, ${val.geometry.coordinates[1]}, \"${val.properties.shortName}\")`;
                            items.push( "<li><a href='#' onClick=\'"+f+"\'>" + val.properties.title + "</a></li>" );
                        });

                        $("<ul/>", {
                            "id": "results_list",
                            "class": "my-new-list",
                            html: items.join("")
                        }).appendTo("#sidebar-container");
                    });
                
                    map = new mapboxgl.Map({
                        container: 'map',
                        style: 'mapbox://styles/user9984/cjsfcrcsu2y791fp9lnpjcjkz',                    // "Outdoors (Blank)"
                        //style: 'mapbox://styles/mapbox/satellite-v9',                            // satellite
                        center: [-120.183135, 39.052539],
                        zoom: 6,
                        minZoom: 0,
                        maxZoom: 22
        /*                    , maxBounds: [
                            [-124.3, 32],    //-74.04728500751165, 40.68392799015035], // Southwest coordinates
                            [-116.0, 49.2]   // -73.91058699000139, 40.87764500765852]  // Northeast coordinates  
                          ]
        */
                    });

                    var nav = new mapboxgl.NavigationControl();
                    map.addControl(nav, 'top-right');

                    var geoLoc = new mapboxgl.GeolocateControl({
                        positionOptions: {
                            enableHighAccuracy: true
                        },
                        trackUserLocation: true
                    });
                    map.addControl(geoLoc, 'top-right');

                    var scale = new mapboxgl.ScaleControl({
                        maxWidth: 80,
                        unit: 'imperial'
                    });
                    map.addControl(scale);
                    // scale.setUnit('metric');
                
                    // show lnglat of cursor, update whenever cursor moves.
                    map.on('mousemove', function (e) {
                        document.getElementById('info').innerHTML = e.lngLat.lat.toFixed(5) + ", " + e.lngLat.lng.toFixed(5);
                    });
                    
                    map.on('moveend', function (e) {
                        var center = map.getCenter();
                        var zoom = map.getZoom();
                        
                        if(updateUrl == true) {
                            window.history.pushState('page', '', '?latlon=(' + center.lat.toFixed(5) + ',' + center.lng.toFixed(5) +')&zoom=' + zoom.toFixed(2));
                        }

                        updateUrl = true;
                    });
                
                    map.on('load', function () {
                        $("#search_go").click();                                                    // show search db.

                        var helloPopup = new mapboxgl.Popup({closeButton: true, closeOnClick: true, anchor: 'center'})
                            .setHTML("Welcome to the Pacific Crest Trail on <a target='_blank' rel='noopener noreferrer' href='http://www.longtrailsmap.net'>www.longtrailsmap.net</a>!<br>Thanks to the incredible <a target='_blank' rel='noopener noreferrer' href='https://www.mapbox.com/community/'>Mapbox Community Program</a><br>for their generous sponsorship of server costs associated<br>with this site, and also to the amazing <a href='https://www.pctmap.net/' target='_blank' rel='noopener noreferrer'>Halfmile Media</a> project.<br><a href='https://github.com/numbers007/longtrailsmap' target='_blank' rel='noopener noreferrer'>LTM is on GitHub!</a>")
                            .setLngLat([-120.183135, 39.052539])
                            //.addTo(map)
                            ;

                        var addLocationLat = "";
                        var addLocationLon = "";
                        
                        map.doubleClickZoom.disable();
                        
                        if(window.location.search == "") {
                            helloPopup.addTo(map);
                        } else {
                            if(paramName !== "" && paramName !== null) {
                                results = markers.features.filter(function(item) { 
                                    return item.properties.searchString.includes(paramName);
                                });
                                
                                var lon = results[0].geometry.coordinates[0];
                                var lat = results[0].geometry.coordinates[1];

                                updateUrl = false;
                                map.flyTo({center: [lon, lat], zoom:16, speed: 0.5, curve: 1.82});

                            } else {
                                if(paramLatLon !== null && paramZoom !== null) {
                                    const lat = parseFloat(paramLatLon.replace('(','').replace(')','').split(',')[0]);
                                    const lon = parseFloat(paramLatLon.replace('(','').replace(')','').split(',')[1]);
                                    
                                    map.flyTo({center: [lon, lat], zoom: parseFloat(paramZoom), speed:0.5, curve: 1.82});
                                } else {
                                    if(paramLatLon != null) {
                                        const lat = parseFloat(paramLatLon.replace('(','').replace(')','').split(',')[0]);
                                        const lon = parseFloat(paramLatLon.replace('(','').replace(')','').split(',')[1]);
                                        
                                        map.flyTo({center: [lon, lat], zoom: 16, speed:0.5, curve: 1.82});
                                    } else {
                                        if(paramZoom !== null) {
                                            map.zoomTo(paramZoom);
                                        }
                                    }
                                }
                            }
                        };

                        map.on('dragstart', function() {
                            helloPopup.remove();
                        });

                        var trailNamePopup = new mapboxgl.Popup({ offset: 15, closeButton: false });
                                        
                        // marker clustering code from https://docs.mapbox.com/mapbox-gl-js/example/cluster/
                        map.addSource("markers", {
                            type: "geojson",
                            // Point to GeoJSON data. This example visualizes all M1.0+ earthquakes
                            // from 12/22/15 to 1/21/16 as logged by USGS' Earthquake hazards program.
                            data: "http://www.longtrailsmap.net/pacific-crest-trail/pct-markers.geojson",
                            cluster: true,
                            clusterMaxZoom: 14, // Max zoom to cluster points on
                            clusterRadius: 50 // Radius of each cluster when clustering points (defaults to 50)
                        });

                        map.addLayer({
                            id: "clusters",
                            type: "circle",
                            source: "markers",
                            filter: ["has", "point_count"],
                            paint: {
                                // Use step expressions (https://docs.mapbox.com/mapbox-gl-js/style-spec/#expressions-step)
                                // with three steps to implement three types of circles:
                                //   * Blue, 20px circles when point count is less than 100
                                //   * Yellow, 30px circles when point count is between 100 and 750
                                //   * Pink, 40px circles when point count is greater than or equal to 750
                                "circle-color": [
                                    "step",
                                    ["get", "point_count"],
                                    "rgb(5, 150, 5)",
                                    100,
                                    "rgb(5, 150, 5)",
                                    750,
                                    "rgb(5, 150, 5)"
                                ],
                                "circle-radius": [
                                    "step",
                                    ["get", "point_count"],
                                    10, 100,                         // (x, n) where x is radius of circle marker in pixels for point_count <= n.
                                    15, 750, 
                                    20
                                ]
                            }
                        });

                        map.addLayer({
                            id: "cluster-count",
                            type: "symbol",
                            source: "markers",
                            filter: ["has", "point_count"],
                            layout: {
                                "text-field": "{point_count_abbreviated}",
                                "text-font": ["DIN Offc Pro Medium", "Arial Unicode MS Bold"],
                                "text-size": 16
                                },
                            paint: {
                                "text-color": "white"
                            }
                        });

                        map.addLayer({
                            id: "unclustered-point",
                            type: "circle",
                            source: "markers",
                            filter: ["!", ["has", "point_count"]],
                            paint: {
                                "circle-color": "rgb(5, 150, 5)", //"#11b4da",
                                "circle-radius": 4,
                                "circle-stroke-width": 1,
                                "circle-stroke-color": "#fff"
                            }
                        });
                         
                        // inspect a cluster on click
                        map.on('click', 'clusters', function (e) {
                            var features = map.queryRenderedFeatures(e.point, { layers: ['clusters'] });
                            var clusterId = features[0].properties.cluster_id;
                            map.getSource('markers').getClusterExpansionZoom(clusterId, function (err, zoom) {
                                if (err)
                                    return;
                                 
                                map.easeTo({
                                    center: features[0].geometry.coordinates,
                                    zoom: zoom
                                });
                            });
                        });
                         
                        map.on('mouseenter', 'clusters', function () {
                            map.getCanvas().style.cursor = 'pointer';
                        });

                        map.on('mouseleave', 'clusters', function () {
                            map.getCanvas().style.cursor = '';
                        });

                        // layer popup code from https://docs.mapbox.com/mapbox-gl-js/example/popup-on-click/
                        // When a click event occurs on a feature in the places layer, open a popup at the
                        // location of the feature, with description HTML from its properties.
                        map.on('click', 'unclustered-point', function (e) {
                            var coordinates = e.features[0].geometry.coordinates.slice();
                            var title = e.features[0].properties.title;
                            var ltmLink = e.features[0].properties.ltmLink;
                             
                            // Ensure that if the map is zoomed out such that multiple
                            // copies of the feature are visible, the popup appears
                            // over the copy being pointed to.
                            while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
                            coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
                            }
                             
                            new mapboxgl.Popup()
                            .setLngLat(coordinates)
                            .setHTML('<h4>' + title + '</h4><br>' + ltmLink)
                            .addTo(map);
                        });

                        // Change the cursor to a pointer when the mouse is over the places layer.
                        map.on('mouseenter', 'unclustered-point', function () {
                            map.getCanvas().style.cursor = 'pointer';
                        });
                         
                        // Change it back to a pointer when it leaves.
                        map.on('mouseleave', 'uclustered-point', function () {
                            map.getCanvas().style.cursor = '';
                        });

        /*
                        // add markers to map
                        markers.features.forEach(function(marker) {
                          // create a HTML element for each feature
                          var el = document.createElement('div');
                          el.className = 'marker';

                          // make a marker for each feature and add to the map
                          new mapboxgl.Marker(el)
                            .setLngLat(marker.geometry.coordinates)
                            .setPopup(new mapboxgl.Popup({ offset: 25 }) // add popups
                            //.setHTML('<h3>' + marker.properties.title + '</h3><p>' + marker.properties.description + '</p>'))
                            .setHTML('<h4>' + marker.properties.title + '</h4> <a href=\'http://www.longtrailsmap.net/pacific-crest-trail?name=' + marker.properties.shortName + '\'>(Shareable link)</a>'))
                            
                            .addTo(map);
                        });            
        */
                        
                        map.on('dblclick', function (e) {
                            //alert("click");
                            addLocationLat = e.lngLat.lat;
                            addLocationLon = e.lngLat.lng;
                            
                            $( function() {
                                $( "#dialog" ).dialog();
                            });
                        });

                        $("#btnAddLocationSubmit").click(function(e) {
                            var msg = 'http://www.longtrailsmap.net/pacific-crest-trail?latlon=(' + addLocationLat + ',' + addLocationLon + ')   PCT:' + $("#addLocationDescription").val();
                            
                            $.get('https://p6p0ync5tb.execute-api.us-east-1.amazonaws.com/v1/ltm?Desc=' + msg);
                            
                            $("#addLocationDescription").val('');
                            
                            $("#dialog").dialog('close');
                        });
                        
                        $("#btnAddLocationCancel").click(function(e) {
                            $("#addLocationDescription").val('');
                            
                            $("#dialog").dialog('close');
                        });












                        map.addLayer({
                            'id': '2019-09-reroute-castle-crags',				                        // 'id' is arbitrary
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.5f1vp1a9'        	                            // this s/b a tileset 'map id'. must be an existing resource.
                            },
                            'source-layer': 'tracks',				                                    // from tileset page.
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', '2019-09-reroute-castle-crags', function(e) {
                            map.setPaintProperty('2019-09-reroute-castle-crags', 'line-width', 4);

                            trailNamePopup.setHTML("Castle Crags Reroute as of September 2019.");
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', '2019-09-reroute-castle-crags', function() {
                            map.setPaintProperty('2019-09-reroute-castle-crags', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });


                        map.addLayer({
                            'id': 'ltm201909A_CA_Sec_A_tracks',
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0lir7ra1wx42nnytqdjpw4t-1qf41'
                            },
                            'source-layer': 'ltm201909A_CA_Sec_A_tracks',
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_CA_Sec_A_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);
                        
                            map.setPaintProperty('ltm201909A_CA_Sec_A_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_CA_Sec_A_tracks', function() {
                            map.setPaintProperty('ltm201909A_CA_Sec_A_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });


                        map.addLayer({
                            'id': 'ltm201909A_CA_Sec_B_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9mtbd1ana2tqua7235e14-2cryl'        	    
                            },
                            'source-layer': 'ltm201909A_CA_Sec_B_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_CA_Sec_B_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_CA_Sec_B_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_CA_Sec_B_tracks', function() {
                            map.setPaintProperty('ltm201909A_CA_Sec_B_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });


                        map.addLayer({
                            'id': 'ltm201909A_CA_Sec_C_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9n2w30xzw2umr0tpoqksd-0x02x'        	    
                            },
                            'source-layer': 'ltm201909A_CA_Sec_C_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_CA_Sec_C_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_CA_Sec_C_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_CA_Sec_C_tracks', function() {
                            map.setPaintProperty('ltm201909A_CA_Sec_C_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });


                        map.addLayer({
                            'id': 'ltm201909A_CA_Sec_D_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9nd0n0y4f2imrty505lvb-9poct'        	    
                            },
                            'source-layer': 'ltm201909A_CA_Sec_D_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_CA_Sec_D_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_CA_Sec_D_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_CA_Sec_D_tracks', function() {
                            map.setPaintProperty('ltm201909A_CA_Sec_D_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });


                        map.addLayer({
                            'id': 'ltm201909A_CA_Sec_E_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9nlzd003c2ut91ut7o9zs-4z8w2'        	    
                            },
                            'source-layer': 'ltm201909A_CA_Sec_E_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_CA_Sec_E_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_CA_Sec_E_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_CA_Sec_E_tracks', function() {
                            map.setPaintProperty('ltm201909A_CA_Sec_E_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_CA_Sec_F_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9nw8n0jp52oqnwyxp3dln-5g7mf'        	    
                            },
                            'source-layer': 'ltm201909A_CA_Sec_F_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_CA_Sec_F_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_CA_Sec_F_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_CA_Sec_F_tracks', function() {
                            map.setPaintProperty('ltm201909A_CA_Sec_F_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_CA_Sec_G_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9o4970j8j2it27awq5m8s-771gv'        	    
                            },
                            'source-layer': 'ltm201909A_CA_Sec_G_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_CA_Sec_G_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_CA_Sec_G_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_CA_Sec_G_tracks', function() {
                            map.setPaintProperty('ltm201909A_CA_Sec_G_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_CA_Sec_H_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9odwa0mtx2inm0px8zjp7-7xpa4'        	    
                            },
                            'source-layer': 'ltm201909A_CA_Sec_H_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_CA_Sec_H_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_CA_Sec_H_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_CA_Sec_H_tracks', function() {
                            map.setPaintProperty('ltm201909A_CA_Sec_H_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_CA_Sec_I_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9opi125df2vo0m8vskues-0onpa'        	    
                            },
                            'source-layer': 'ltm201909A_CA_Sec_I_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_CA_Sec_I_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_CA_Sec_I_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_CA_Sec_I_tracks', function() {
                            map.setPaintProperty('ltm201909A_CA_Sec_I_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_CA_Sec_J_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9oxvv7r3v2up7s845eisp-3hftq'        	    
                            },
                            'source-layer': 'ltm201909A_CA_Sec_J_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_CA_Sec_J_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_CA_Sec_J_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_CA_Sec_J_tracks', function() {
                            map.setPaintProperty('ltm201909A_CA_Sec_J_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_CA_Sec_K_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9p6gm0jpk2oqnx1ew35e3-3at3z'        	    
                            },
                            'source-layer': 'ltm201909A_CA_Sec_K_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_CA_Sec_K_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_CA_Sec_K_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_CA_Sec_K_tracks', function() {
                            map.setPaintProperty('ltm201909A_CA_Sec_K_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_CA_Sec_L_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9pe2c0j7d2nt2jb2ievyj-7unvh'        	    
                            },
                            'source-layer': 'ltm201909A_CA_Sec_L_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_CA_Sec_L_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_CA_Sec_L_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_CA_Sec_L_tracks', function() {
                            map.setPaintProperty('ltm201909A_CA_Sec_L_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_CA_Sec_M_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9pn3j19mh2nqupswcgcv9-70gy6'        	    
                            },
                            'source-layer': 'ltm201909A_CA_Sec_M_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_CA_Sec_M_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_CA_Sec_M_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_CA_Sec_M_tracks', function() {
                            map.setPaintProperty('ltm201909A_CA_Sec_M_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_CA_Sec_N_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9pviv0jr32tqnj5jzvzk8-5ic6n'        	    
                            },
                            'source-layer': 'ltm201909A_CA_Sec_N_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_CA_Sec_N_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_CA_Sec_N_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_CA_Sec_N_tracks', function() {
                            map.setPaintProperty('ltm201909A_CA_Sec_N_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_CA_Sec_O_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9q5q10ns92nofuqv6m2fr-61yag'        	    
                            },
                            'source-layer': 'ltm201909A_CA_Sec_O_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_CA_Sec_O_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_CA_Sec_O_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_CA_Sec_O_tracks', function() {
                            map.setPaintProperty('ltm201909A_CA_Sec_O_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_CA_Sec_P_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9qgne0oaa2nnm8aiauo99-8ma1s'        	    
                            },
                            'source-layer': 'ltm201909A_CA_Sec_P_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_CA_Sec_P_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_CA_Sec_P_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_CA_Sec_P_tracks', function() {
                            map.setPaintProperty('ltm201909A_CA_Sec_P_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_CA_Sec_Q_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9qpjs0oaf2nnmxwoi194y-9e5mz'        	    
                            },
                            'source-layer': 'ltm201909A_CA_Sec_Q_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_CA_Sec_Q_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_CA_Sec_Q_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_CA_Sec_Q_tracks', function() {
                            map.setPaintProperty('ltm201909A_CA_Sec_Q_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_CA_Sec_R_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9r0gg003o2nt9mwpqxxzk-1kqcn'        	    
                            },
                            'source-layer': 'ltm201909A_CA_Sec_R_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_CA_Sec_R_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_CA_Sec_R_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_CA_Sec_R_tracks', function() {
                            map.setPaintProperty('ltm201909A_CA_Sec_R_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_OR_Sec_B_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9r8pq003t2nt9ax80b9u7-2s4to'        	    
                            },
                            'source-layer': 'ltm201909A_OR_Sec_B_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_OR_Sec_B_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_OR_Sec_B_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_OR_Sec_B_tracks', function() {
                            map.setPaintProperty('ltm201909A_OR_Sec_B_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_OR_Sec_C_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9rgue0mv72inm8o86s4o2-8gay5'        	    
                            },
                            'source-layer': 'ltm201909A_OR_Sec_C_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_OR_Sec_C_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_OR_Sec_C_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_OR_Sec_C_tracks', function() {
                            map.setPaintProperty('ltm201909A_OR_Sec_C_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_OR_Sec_D_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9rp9e0k1t2nqnmpvy2t3l-482eo'        	    
                            },
                            'source-layer': 'ltm201909A_OR_Sec_D_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_OR_Sec_D_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_OR_Sec_D_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_OR_Sec_D_tracks', function() {
                            map.setPaintProperty('ltm201909A_OR_Sec_D_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_OR_Sec_E_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9rydn0k202nqn3hoqt6gr-1qgl4'        	    
                            },
                            'source-layer': 'ltm201909A_OR_Sec_E_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_OR_Sec_E_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_OR_Sec_E_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_OR_Sec_E_tracks', function() {
                            map.setPaintProperty('ltm201909A_OR_Sec_E_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_OR_Sec_F_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9s6f60cy92it52m7gf9gu-24k4c'        	    
                            },
                            'source-layer': 'ltm201909A_OR_Sec_F_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_OR_Sec_F_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_OR_Sec_F_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_OR_Sec_F_tracks', function() {
                            map.setPaintProperty('ltm201909A_OR_Sec_F_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_OR_Sec_G_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9sf2w1bvi2oqu5t4b636p-6kegb'        	    
                            },
                            'source-layer': 'ltm201909A_OR_Sec_G_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_OR_Sec_G_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_OR_Sec_G_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_OR_Sec_G_tracks', function() {
                            map.setPaintProperty('ltm201909A_OR_Sec_G_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_WA_Sec_H_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9sqed25hj2io0a9x6lup1-5z3kw'        	    
                            },
                            'source-layer': 'ltm201909A_WA_Sec_H_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_WA_Sec_H_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_WA_Sec_H_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_WA_Sec_H_tracks', function() {
                            map.setPaintProperty('ltm201909A_WA_Sec_H_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_WA_Sec_I_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9t1n51bvo2oquks5x6eyi-9f0w4'        	    
                            },
                            'source-layer': 'ltm201909A_WA_Sec_I_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_WA_Sec_I_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_WA_Sec_I_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_WA_Sec_I_tracks', function() {
                            map.setPaintProperty('ltm201909A_WA_Sec_I_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_WA_Sec_J_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9tadc19a42iqu64om1b6h-80med'        	    
                            },
                            'source-layer': 'ltm201909A_WA_Sec_J_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_WA_Sec_J_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_WA_Sec_J_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_WA_Sec_J_tracks', function() {
                            map.setPaintProperty('ltm201909A_WA_Sec_J_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_WA_Sec_K_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9tj0p25ev2vo0850x47hy-45ne7'        	    
                            },
                            'source-layer': 'ltm201909A_WA_Sec_K_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_WA_Sec_K_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_WA_Sec_K_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_WA_Sec_K_tracks', function() {
                            map.setPaintProperty('ltm201909A_WA_Sec_K_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });



                        map.addLayer({
                            'id': 'ltm201909A_WA_Sec_L_tracks',				            
                            'type': 'line',
                            'source': {
                                'type': 'vector',
                                'url': 'mapbox://user9984.ck0a9tr4s19ad2iqu9wofvbn9-0t6sv'        	    
                            },
                            'source-layer': 'ltm201909A_WA_Sec_L_tracks',				            
                            'layout': {
                                'visibility': 'visible'
                            },
                            'paint': {
                                'line-color': ['get', 'color'],
                                'line-width': 2
                            }
                        });
                        map.on('mousemove', 'ltm201909A_WA_Sec_L_tracks', function(e) {
                            var features = map.queryRenderedFeatures(e.point);

                            map.setPaintProperty('ltm201909A_WA_Sec_L_tracks', 'line-width', 4);

                            trailNamePopup.setText(features[0].properties.name);
                            trailNamePopup
                                .setLngLat(e.lngLat)
                                .addTo(map);
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'none' );
                        });
                        map.on('mouseleave', 'ltm201909A_WA_Sec_L_tracks', function() {
                            map.setPaintProperty('ltm201909A_WA_Sec_L_tracks', 'line-width', 2);

                            trailNamePopup.remove();
                            //map.setLayoutProperty('pacific-crest-trail', 'visibility', 'visible');
                        });
                    });
                });
            });
        </script>
	</body>
</html>